/* ===========================
   HEARTSTRINGS — MENU CHASSIS
   Same as Stag & Stone menu page
   Differences:
   - Background texture: assets/apoth-bg.png
   - Border/frame overlay: assets/heartstrings-frame.png
   - Runes canvas disabled (kept for parity)
   =========================== */

:root{
  --text: #d8d2c7;
  --muted: rgba(216,210,199,.70);
  --rule: rgba(255,255,255,.10);

  --bg0:#050609;
  --bg1:#0b0e13;

  /* Apothecary background texture */
  --charcoalTex: url("assets/apoth-bg.png");

  /* Apothecary frame/border overlay */
  --frameImg: url("assets/heartstrings-frame.png");
  --frameOpacity: .96;

  /* Copper */
  --c1:#f6e3ce;
  --c2:#e6bf9a;
  --c3:#c57b54;
  --c4:#8d432a;

  --copperGrad: linear-gradient(
    180deg,
    var(--c1) 0%,
    var(--c2) 18%,
    var(--c3) 48%,
    var(--c2) 72%,
    var(--c4) 100%
  );

  --pad: clamp(14px, 2.2vw, 22px);
  --radius: 18px;

  /* Rune-rail safe window (we keep these for identical spacing behavior) */
  --wardSafeX: 34px;
  --wardSafeY: 44px;

  /* Header button rail safety */
  --btnRailPad: 18px;     /* keeps buttons off rune rails */
  --btnGap: 16px;

  /* Embers strength (menu-equivalent) */
  --emberOpacity: .55;
}

*{ box-sizing:border-box; }

html, body{
  height: 100%;
  margin:0;
}

body{
  font-family: ui-serif, Georgia, "Times New Roman", serif;
  color: var(--text);
  overflow: hidden;

  background:
    radial-gradient(120% 90% at 50% 12%, rgba(255,255,255,.05), transparent 60%),
    radial-gradient(120% 120% at 50% 50%, transparent 55%, rgba(0,0,0,.82) 100%),
    linear-gradient(180deg, var(--bg1), var(--bg0));
}

/* film grain */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
  opacity:.12;
  background:
    repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, rgba(0,0,0,.03) 1px 2px),
    repeating-linear-gradient(90deg, rgba(255,255,255,.02) 0 1px, rgba(0,0,0,.02) 1px 3px);
}

/* apothecary texture (same slot as charcoal) */
body::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
  opacity:.30;
  background-image: var(--charcoalTex);
  background-repeat: repeat;
  background-size: 1000px 1000px;
  mix-blend-mode: soft-light;
}

/* FX canvases */
#embers, #runes{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
}
#embers{ z-index:1; opacity: var(--emberOpacity); }
#runes{ z-index:5; opacity: 0; } /* kept for parity; disabled */

/* Panel viewport */
.panel{
  position:relative;
  z-index:3;

  width: min(980px, 92vw);
  height: min(92vh, 980px);
  margin: clamp(16px, 3.5vh, 44px) auto;

  display:flex;
  flex-direction:column;

  border-radius: var(--radius);
  overflow:hidden;

  background: linear-gradient(180deg, rgba(6,8,10,.22), rgba(6,8,10,.08));
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);

  box-shadow: 0 18px 70px rgba(0,0,0,.65);
  border: 1px solid rgba(255,255,255,.06);
}

/* NEW: Apothecary frame overlay (different border) */
.panel::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius: var(--radius);
  background-image: var(--frameImg);
  background-repeat: no-repeat;
  background-size: 100% 100%;
  pointer-events:none;
  z-index: 6;              /* above content */
  opacity: var(--frameOpacity);
  filter: drop-shadow(0 18px 45px rgba(0,0,0,.62));
}

/* Copper utility */
.copper{
  background: var(--copperGrad);
  -webkit-background-clip:text;
  background-clip:text;
  color: transparent;
  -webkit-text-fill-color: transparent;
  text-shadow:
    0 2px 0 rgba(0,0,0,.55),
    0 14px 26px rgba(0,0,0,.72);
}

/* Header */
.top{
  padding: var(--pad);
  text-align:center;
  border-bottom: 1px solid var(--rule);
  position: relative;
  z-index: 4;
}

.kicker{
  font-size: clamp(18px, 2.2vw, 26px); /* larger */
  letter-spacing: 5px;
  opacity:.95;
}

.town{
  margin-top: 6px;
  font-size: clamp(14px, 1.8vw, 18px);
  letter-spacing: 2px;
  color: var(--muted);
}

/* ACTION ROW: centered + symmetric + rune-safe */
.menuHeader{
  display:flex;
  justify-content:center;
  align-items:center;
  gap: var(--btnGap);

  margin-top: 12px;
  margin-bottom: 6px;

  /* keep the whole row away from rune rails */
  padding-inline: var(--btnRailPad);
}

/* Square copper buttons */
.cornerBtn{
  width: 92px;
  height: 44px;
  display:grid;
  place-items:center;

  font-size: 12px;
  font-weight: 900;
  letter-spacing: 2px;
  text-transform: uppercase;
  text-decoration:none;

  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.12);

  background: var(--copperGrad);
  color: #1a0f0a;

  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.38),
    inset 0 -2px 5px rgba(0,0,0,.35),
    0 10px 22px rgba(0,0,0,.55);

  user-select:none;
  -webkit-tap-highlight-color: transparent;
}

.cornerBtn:hover{
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.48),
    inset 0 -2px 7px rgba(0,0,0,.45),
    0 14px 30px rgba(0,0,0,.65);
}
.cornerBtn:active{ transform: translateY(1px); }

.sub{
  font-size: clamp(14px, 2vw, 18px);
  margin-top: 10px;
}

/* ✅ only scroll container */
#menu{
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;

  padding:
    calc(var(--wardSafeY) * 0.55)
    calc(var(--pad) + var(--wardSafeX))
    calc(var(--wardSafeY) * 0.75);

  scrollbar-width: none;
  position: relative;
  z-index: 4;
}
#menu::-webkit-scrollbar{ width:0; height:0; }

/* Sections */
.section{ margin: 18px 0 26px; }

.sectionTitle{
  margin: 0 0 12px;
  text-align:center;
  font-size: clamp(18px, 2.6vw, 30px);
  letter-spacing: 6px;
  text-transform: uppercase;
}

/* Items */
.item{
  display:flex;
  justify-content:space-between;
  gap: 14px;
  padding: 11px 0;
  border-bottom: 1px solid rgba(255,255,255,.10);
}
.item:last-child{ border-bottom:none; }

.left{ flex:1; min-width:0; }

.name{
  font-size: clamp(18px, 2.2vw, 28px);
  font-weight: 650;
}

.desc{
  margin-top: 6px;
  font-size: clamp(13px, 1.6vw, 18px);
  line-height: 1.25;
  color: var(--muted);
  text-shadow: 0 10px 22px rgba(0,0,0,.65);
}

.price{
  font-size: clamp(16px, 2vw, 24px);
  white-space:nowrap;
}

/* ===========================
   MOBILE
   =========================== */

@media (max-width: 520px){
  :root{
    --wardSafeX: 54px;
    --wardSafeY: 54px;

    --btnRailPad: 26px; /* stronger inset from rune rails */
    --btnGap: 12px;     /* closer together */
  }

  .panel{ width: 94vw; }

  .cornerBtn{
    width: 68px;   /* smaller so they stop touching the border */
    height: 36px;
    border-radius: 11px;
    font-size: 10px;
    letter-spacing: 1.4px;
  }

  .name{ font-size: clamp(17px, 4.6vw, 22px); }
  .price{ font-size: clamp(15px, 4.2vw, 20px); }
}

@media (max-width: 380px){
  :root{
    --wardSafeX: 62px;
    --btnRailPad: 30px;
    --btnGap: 10px;
  }

  .cornerBtn{
    width: 62px;
    height: 34px;
    font-size: 10px;
    letter-spacing: 1.25px;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  #embers{ display:none; }
}